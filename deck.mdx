export { vsDarkFull as theme } from "code-surfer";

import React from "react";
import { Appear, Image } from "mdx-deck";
import {
  CodeSurferColumnLayout,
  Step,
  Code,
  vsDarkFull as hooksTheme,
} from "code-surfer";

## Avoid These When Using _Hooks_

### [ReactJS ID](http://reactjs.id) @adibfirman

---

## Heeeyyy Folks...!!

<ul>
  <Appear>
    <li>
      I am{" "}
      <a href="https://github.com/adibfirman">
        Adib Firman
      </a>
    </li>
    <li>
      Frontend Engineer @{" "}
      <a href="https://qlue.co.id">Qlue</a>
    </li>
    <li>I ‚ù§Ô∏è JS</li>
  </Appear>
</ul>

---

## My Talk is Not about üò´

<ul>
  <Appear>
    <li>Basic of React</li>
    <li>Basic of JS</li>
    <li>How To Test in React</li>
    <li>CSS or HTML...??? üòí</li>
  </Appear>
</ul>

---

## My Talk is üòÉ

<ul>
  <Appear>
    <li>To Make You</li>
    <li>Understand more about</li>
    <li>
      <i><b>React Hooks</b></i>
    </li>
  </Appear>
</ul>

---

## Why you should use _hooks?_

<ul>
  <Appear>
    <li>
      Goodbye... <i>this</i> üëã
    </li>
    <li>
      Goodbye... <i>HOC</i> üëã
    </li>
    <li>Easier reuse your function</li>
    <li>etc</li>
  </Appear>
</ul>

---

## But, some people are confused with that... why??

---

## Thinking like _class component_

---

<CodeSurferColumnLayout>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-1/script.0.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-1/script.1.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-1/script.2.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-1/script.3.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-1/script.4.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-1/script.5.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout>
  <Step subtitle="It's simple isn't?">
    <Code
      code={
        require("!!raw-loader!./src/pitfall-1/script.5.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 1]}>
  <Step>
    <Code
      code={
        require("!!raw-loader!./src/pitfall-1/script.5.js")
          .default
      }
    />
    <Code
      code={
        require("!!raw-loader!./src/pitfall-1/script.6.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      focus="2,3,4"
      code={
        require("!!raw-loader!./src/pitfall-1/script.5.js")
          .default
      }
    />
    <Code
      code={
        require("!!raw-loader!./src/pitfall-1/script.7.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      focus="5,6,7"
      code={
        require("!!raw-loader!./src/pitfall-1/script.5.js")
          .default
      }
    />
    <Code
      code={
        require("!!raw-loader!./src/pitfall-1/script.8.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      focus="8,9,10"
      code={
        require("!!raw-loader!./src/pitfall-1/script.5.js")
          .default
      }
    />
    <Code
      code={
        require("!!raw-loader!./src/pitfall-1/script.9.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      focus="11,12,13"
      code={
        require("!!raw-loader!./src/pitfall-1/script.5.js")
          .default
      }
    />
    <Code
      code={
        require("!!raw-loader!./src/pitfall-1/script.10.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 1]}>
  <Step subtitle="It's simple thinking like that, isn't?">
    <Code
      code={
        require("!!raw-loader!./src/pitfall-1/script.5.js")
          .default
      }
    />
    <Code
      code={
        require("!!raw-loader!./src/pitfall-1/script.11.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

## Though like that, that's wrong....!!!

---

> The question is not "when does this effect run" the question is "with which state does this effect synchronize with"
> -- [@ryanflorence](https://twitter.com/ryanflorence)

---

<!-- ----------------------------------------- 2. pitfalls--------------------------------------- -->

## Abuse the Hooks API

---

<CodeSurferColumnLayout sizes={[1, 1]}>
  <Step subtitle="What's the problem with this code?">
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-2/script.0.js")
          .default
      }
    />
  </Step>
  <Step subtitle="This is the problem...!!">
    <Code
      focus="5,6,7"
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-2/script.0.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

## The explanation

<ul>
  <Appear>
    <li>
      call a useCallback which <br />
      itself is setting running through <br />
      logical expressions etc.
    </li>
    <li>
      not get a garbage collection on the second render
    </li>
    <li>a function doing more work :(</li>
  </Appear>
</ul>

---

> identify your function first, and then you will know it's needed or not :)
> -- [@adibfirman](https://twitter.com/dibfirman)

---

<!-- ---------------------------------------------------------------------------------------------------------------- -->

## Problematic with inline function

---

<CodeSurferColumnLayout>
  <Step subtitle="some people worry about this component üòµÔ∏è">
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-2/script.2.js")
          .default
      }
    />
  </Step>
  <Step subtitle="1. defined function inside the component">
    <Code
      focus="4,5,6"
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-2/script.2.js")
          .default
      }
    />
  </Step>
  <Step subtitle="2. defined function as props in the component, it can't be optimized">
    <Code
      focus="8"
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-2/script.2.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

### For the first point...

> Javascript Engine is Fast, dont worry about that...!!!
> even in low-end devices

---

### for the second point...

> Don't thinking <br/>
> _"inline functions can be problematic for performance"_ <br/>
> Just because a component re-renders,
> doesn't mean the DOM will get updated (updating the DOM can be slow).
> **_React does a great job_** :)

---

<!-- --------------------------------------------------------------------------------- next ------------------------------------------- -->

## Rules are made to be broken üòéÔ∏è

---

<CodeSurferColumnLayout>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/script.0.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

##### When Hooks was released, CRA adding a new rules for hooks

<ul>
  <Appear>
    <li>react-hooks/rules-of-hooks</li>
    <li>react-hooks/exhaustive-deps</li>
  </Appear>
</ul>

---

## what's the difference?

---

## react-hooks/rules-of-hooks
> 1. Only Call Hooks at the Top Level

---

<CodeSurferColumnLayout>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/script.1.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

> So how does React know which state to call?<br/>
> like _useState_ and so on

---

> The answer is.....<br/>
> that **_React relies on the order in which Hooks are called_**

---

<CodeSurferColumnLayout>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/script.2.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/script.3.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

> But what happens if we calls hooks inside the condition?

---

<CodeSurferColumnLayout>
  <Step subtitle="like this?">
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/script.4.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

> Let's look behind the scenes..!!

---

<CodeSurferColumnLayout>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/script.5.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/script.6.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/script.7.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

> This is why Hooks must be called on the top level of our components -- [@reactjs.org]()

---

## react-hooks/rules-of-hooks
> <del>1. Only Call Hooks at the Top Level</del><br/>
> 2. Only Call Hooks from React Functions

---

## react-hooks/exhaustive-deps

---

<CodeSurferColumnLayout>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-3/script.0.js")
          .default
      }
    />
  </Step>
  <Step>
    <Code
      lang="jsx"
      code={
        require("!!raw-loader!./src/pitfall-3/script.1.js")
          .default
      }
    />
  </Step>
</CodeSurferColumnLayout>

---

> Install and Follow the Eslint Rules <br/>
> [eslint-plugin-react-hooks](https://www.npmjs.com/package/eslint-plugin-react-hooks)

---

## You not trying to read the docs and FAQ about hooks

---

## That's all

### Thank You
